<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #f0f4f8 url('https://www.transparenttextures.com/patterns/cubes.png');
        }
        /* Animation for elements fading in on load */
        @keyframes enter-animation {
            0% {
                opacity: 0;
                transform: translateY(20px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .animate-enter {
            animation: enter-animation 0.6s ease-out forwards;
        }
        /* Staggered animation delay */
        .delay-150 { animation-delay: 150ms; }
        .delay-300 { animation-delay: 300ms; }

        /* Make sure initial state is invisible for animation */
        .animate-enter {
            opacity: 0;
        }

        .modal-enter {
            animation: modal-enter-animation 0.3s ease-out forwards;
        }
        .modal-content-enter {
             animation: enter-animation 0.3s ease-out 0.1s forwards;
             opacity: 0;
        }
        @keyframes modal-enter-animation {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }
        .note-card {
            animation: enter-animation 0.4s ease-out forwards;
            opacity: 0;
        }

    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Main Content -->
    <div id="main-content" class="flex flex-col min-h-screen">
        <!-- Header Section -->
        <header class="bg-white/80 backdrop-blur-sm shadow-sm sticky top-0 z-20">
            <nav class="container mx-auto px-6 py-4 flex justify-between items-center h-16">
                 
            </nav>
        </header>

        <!-- Main Dashboard -->
        <main class="flex-grow container mx-auto p-4 sm:p-6 lg:p-8 flex items-center">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 w-full">
                
                <!-- Left Column -->
                <div class="lg:col-span-1 flex items-center justify-center animate-enter delay-150">
                    <!-- Quote Slider -->
                    <div class="relative bg-white/70 backdrop-blur-sm border border-white/30 p-6 rounded-2xl shadow-lg text-center w-full">
                        <span id="view-count" class="absolute top-3 left-3 bg-[#f4811f] text-white text-xs font-semibold px-2 py-1 rounded-full shadow"></span>
                        <p id="quote-text" class="text-lg md:text-xl text-gray-800 min-h-[120px] flex items-center justify-center px-8 transition-opacity duration-300"></p>
                        <div class="absolute inset-y-0 left-2 flex items-center">
                            <button id="prev-btn" class="p-2 rounded-full text-gray-400 hover:bg-gray-100 hover:text-gray-600 focus:outline-none transition-colors">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                            </button>
                        </div>
                        <div class="absolute inset-y-0 right-2 flex items-center">
                             <button id="next-btn" class="p-2 rounded-full text-gray-400 hover:bg-gray-100 hover:text-gray-600 focus:outline-none transition-colors">
                                 <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Right Column -->
                <div class="lg:col-span-1 animate-enter delay-300">
                     <div class="bg-white/70 backdrop-blur-sm border border-white/30 p-6 rounded-2xl shadow-lg">
                        <div class="flex justify-around items-center gap-6">
                            <a href="class.html" class="w-40 h-40 flex flex-col items-center justify-center space-y-3 p-4 bg-white/50 rounded-2xl hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 border border-transparent hover:border-blue-200">
                                <div class="text-blue-500">
                                     <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                                    </svg>
                                </div>
                                <p class="font-bold text-gray-800 text-lg">Class</p>
                            </a>
                            <a href="contact.html" class="w-40 h-40 flex flex-col items-center justify-center space-y-3 p-4 bg-white/50 rounded-2xl hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 border border-transparent hover:border-orange-200">
                                <div class="text-orange-500">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                                      <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                      <path stroke-linecap="round" stroke-linejoin="round" d="M10 14l2 2 4-4" />
                                    </svg>
                                </div>
                                <p class="font-bold text-gray-800 text-lg">Fard</p>
                            </a>
                        </div>
                     </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Floating Action Button for Notes -->
    <div class="fixed bottom-6 left-1/2 -translate-x-1/2 z-30">
        <button id="open-notes-btn" class="w-16 h-16 bg-blue-500 hover:bg-blue-600 text-white rounded-full flex items-center justify-center shadow-lg transition-all duration-300 transform hover:scale-110" aria-label="Open Notes">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
            </svg>
        </button>
    </div>

    <!-- Notes Modal -->
    <div id="notes-modal" class="hidden fixed inset-0 z-40 flex items-center justify-center p-4 modal-enter">
        <div class="fixed inset-0 bg-black/50 backdrop-blur-sm" id="modal-backdrop"></div>
        <div class="bg-white/80 backdrop-blur-md border border-white/30 rounded-2xl shadow-2xl w-full max-w-2xl p-6 relative modal-content-enter flex flex-col" style="max-height: 90vh;">
            <div class="flex-shrink-0">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-2xl font-bold text-gray-800">Reminders & Notes</h3>
                    <button id="close-notes-btn" class="text-gray-400 hover:text-gray-700 text-3xl leading-none">&times;</button>
                </div>
                <!-- Add New Note Form -->
                <form id="add-note-form" class="bg-white/50 p-4 rounded-lg mb-4">
                    <textarea id="note-content" class="w-full p-2 border border-gray-200 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none bg-transparent" placeholder="Write a new note..." rows="2" required></textarea>
                    <div class="flex items-center justify-between mt-2">
                        <div class="flex items-center space-x-4">
                            <div>
                                <label for="note-deadline" class="text-sm font-medium text-gray-600">Deadline:</label>
                                <input type="date" id="note-deadline" class="p-1 border border-gray-300 rounded-md text-sm">
                            </div>
                            <div>
                                <label class="text-sm font-medium text-gray-600">Priority:</label>
                                <select id="note-priority" class="p-1 border border-gray-300 rounded-md text-sm">
                                    <option value="Chill">Chill</option>
                                    <option value="Important">Important</option>
                                </select>
                            </div>
                        </div>
                        <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors">Add Note</button>
                    </div>
                </form>
            </div>
            <!-- Notes List -->
            <div id="notes-list-container" class="flex-grow overflow-y-auto pr-2 space-y-3">
                <!-- Notes will be rendered here -->
            </div>
        </div>
    </div>


    <script>
        // --- Quote Slider Script ---
        const quotes = [
            "Do not go near adultery; it is truly a shameful deed and an evil way. (17:32)", "Allah loves to see one’s job done with itqan (meticulous excellence).", "When one task is finished, immediately “strive on” into the next, reducing procrastination by keeping momentum. (94:7–8)", "Aim for itqan: set a clear definition of “done well,” review work, and refine, seeking the love of Allah for excellent effort.", "Actions are only by intentions, and each person will have only what he intended…", "Allah does not look at your appearance or wealth, but He looks at your hearts and your deeds.", "Surely, with hardship comes ease; surely, with that hardship comes more ease.", "When finished with one duty, strive on; and to the Lord turn with longing.", "Do not despair; return to Allah with repentance and hope, trusting His promise of forgiveness and relief.", "Aim for إتقان (itqān)—doing work with excellence—as a Prophetic ethic that turns effort into worship.", "Say: Work, for Allah will see your deeds” (9:105), which turns daily work into accountable worship and fuels consistent quality.", "And when your Lord proclaimed: If you are grateful, I will surely increase you.", "We are what we repeatedly do. Excellence, then, is not an act, but a habit. — Aristotle", "The secret of getting ahead is getting started. — Mark Twain", "You do not rise to the level of your goals. You fall to the level of your systems. — James Clear", "Amateurs sit and wait for inspiration, the rest of us just get up and go to work. — Stephen King", "Well done is better than well said. — Benjamin Franklin", "You have a right to perform your prescribed duties, but you are not entitled to the fruits of your actions. — The Bhagavad Gita", "Arise, awake, and stop not till the goal is reached. — Swami Vivekananda", "The mind is everything. What you think you become. — Gautama Buddha", "A man is great by deeds, not by birth. — Chanakya", "To make a deep mental path, we must think over and over the kind of thoughts we wish to dominate our lives. — Henry David Thoreau", "The chains of habit are too weak to be felt until they are too strong to be broken. — Samuel Johnson", "The first principle is that you must not fool yourself – and you are the easiest person to fool. — Richard Feynman", "Success is not final, failure is not fatal: it is the courage to continue that counts. — Winston Churchill"
        ];

        let currentQuoteIndex = -1; // Use -1 to ensure the first quote is always new
        const quoteTextElement = document.getElementById('quote-text');
        const viewCountElement = document.getElementById('view-count');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');

        const getViewCounts = () => JSON.parse(localStorage.getItem('quoteViewCounts')) || new Array(quotes.length).fill(0);
        const saveViewCounts = (counts) => localStorage.setItem('quoteViewCounts', JSON.stringify(counts));

        const showQuote = (index) => {
            quoteTextElement.classList.add('opacity-0');
            setTimeout(() => {
                quoteTextElement.textContent = quotes[index];
                const counts = getViewCounts();
                counts[index]++;
                saveViewCounts(counts);
                viewCountElement.textContent = counts[index];
                quoteTextElement.classList.remove('opacity-0');
            }, 300);
        };
        
        const showRandomQuote = () => {
            if (quotes.length <= 1) { showQuote(0); return; }
            let newIndex;
            do { newIndex = Math.floor(Math.random() * quotes.length); } while (newIndex === currentQuoteIndex);
            currentQuoteIndex = newIndex;
            showQuote(currentQuoteIndex);
        };

        // --- Notes Modal Script ---
        const openNotesBtn = document.getElementById('open-notes-btn');
        const closeNotesBtn = document.getElementById('close-notes-btn');
        const modalBackdrop = document.getElementById('modal-backdrop');
        const addNoteForm = document.getElementById('add-note-form');
        const notesModal = document.getElementById('notes-modal');
        const notesListContainer = document.getElementById('notes-list-container');
        const NOTES_KEY = 'dashboard_notes_list';

        const loadNotes = () => JSON.parse(localStorage.getItem(NOTES_KEY)) || [];
        const saveNotes = (notes) => localStorage.setItem(NOTES_KEY, JSON.stringify(notes));

        const renderNotes = () => {
            const notes = loadNotes();
            
            // Sort notes: Important first, then by deadline
            notes.sort((a, b) => {
                if (a.priority === 'Important' && b.priority !== 'Important') return -1;
                if (a.priority !== 'Important' && b.priority === 'Important') return 1;
                if (a.deadline && b.deadline) return new Date(a.deadline) - new Date(b.deadline);
                if (a.deadline) return -1;
                if (b.deadline) return 1;
                return b.id - a.id; // Fallback to newest first
            });

            notesListContainer.innerHTML = '';
            if (notes.length === 0) {
                notesListContainer.innerHTML = `<p class="text-center text-gray-500 py-8">No notes yet. Add one above!</p>`;
                return;
            }

            notes.forEach(note => {
                const isImportant = note.priority === 'Important';
                const deadlineFormatted = note.deadline ? new Date(note.deadline + 'T00:00:00').toLocaleDateString('en-US', { month: 'short', day: 'numeric' }) : '';
                const isPastDue = note.deadline && new Date(note.deadline) < new Date().setHours(0,0,0,0);

                const card = `
                    <div class="note-card bg-white/60 p-4 rounded-lg flex justify-between items-start gap-4">
                        <div class="flex-grow">
                            <p class="text-gray-800">${note.content.replace(/\n/g, '<br>')}</p>
                            <div class="flex items-center space-x-3 mt-2 text-sm">
                                ${note.deadline ? `
                                <span class="flex items-center ${isPastDue ? 'text-red-500 font-semibold' : 'text-gray-500'}">
                                    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                                    ${deadlineFormatted}
                                </span>` : ''}
                                <span class="px-2 py-0.5 rounded-full text-xs font-medium ${isImportant ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700'}">
                                    ${note.priority}
                                </span>
                            </div>
                        </div>
                        <button class="delete-note-btn flex-shrink-0 text-gray-400 hover:text-red-500 p-1" data-id="${note.id}">
                             <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                        </button>
                    </div>
                `;
                notesListContainer.innerHTML += card;
            });
        };
        
        addNoteForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const content = document.getElementById('note-content').value;
            const deadline = document.getElementById('note-deadline').value;
            const priority = document.getElementById('note-priority').value;
            if (!content) return;

            const newNote = {
                id: Date.now(),
                content,
                deadline: deadline || null,
                priority,
            };

            const notes = loadNotes();
            notes.push(newNote);
            saveNotes(notes);
            renderNotes();
            addNoteForm.reset();
        });

        notesListContainer.addEventListener('click', (e) => {
            const deleteBtn = e.target.closest('.delete-note-btn');
            if (deleteBtn) {
                const noteId = Number(deleteBtn.dataset.id);
                let notes = loadNotes();
                notes = notes.filter(note => note.id !== noteId);
                saveNotes(notes);
                renderNotes();
            }
        });

        // Initialize and handle modal state
        document.addEventListener('DOMContentLoaded', () => {
            showRandomQuote();
            renderNotes();
        });
        prevBtn.addEventListener('click', showRandomQuote);
        nextBtn.addEventListener('click', showRandomQuote);
        openNotesBtn.addEventListener('click', () => notesModal.classList.remove('hidden'));
        closeNotesBtn.addEventListener('click', () => notesModal.classList.add('hidden'));
        modalBackdrop.addEventListener('click', () => notesModal.classList.add('hidden'));

    </script>
</body>
</html>

